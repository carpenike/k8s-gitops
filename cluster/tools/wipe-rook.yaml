---
apiVersion: v1
kind: Pod
metadata:
  name: disk-wipe-node-0
  namespace: rook-ceph
spec:
  restartPolicy: Never
  nodeName: node-0
  containers:
    - name: disk-wipe
      image: cmd.cat/sgdisk/fdisk/dd/partprobe
      securityContext:
        privileged: true
      command: [
          "/bin/sh",
          "-c",

          sgdisk --zap-all /dev/sdb && \
          dd if=/dev/zero of=/dev/sdb bs=4096k count=100 oflag=direct,dsync && \
          blkdiscard /dev/sdb && \
          partprobe /dev/sdb && \

          sgdisk --zap-all /dev/sdc && \
          dd if=/dev/zero of=/dev/sdc bs=4096k count=100 oflag=direct,dsync && \
          blkdiscard /dev/sdc && \
          partprobe /dev/sdc && \

          sgdisk --zap-all /dev/sdd && \
          dd if=/dev/zero of=/dev/sdd bs=4096k count=100 oflag=direct,dsync && \
          blkdiscard /dev/sdd && \
          partprobe /dev/sdd && \,
        ]
---
apiVersion: v1
kind: Pod
metadata:
  name: disk-wipe-node-1
  namespace: rook-ceph
spec:
  restartPolicy: Never
  nodeName: node-1
  containers:
    - name: disk-wipe
      image: cmd.cat/sgdisk/fdisk/dd/partprobe
      securityContext:
        privileged: true
      command: [
          "/bin/sh",
          "-c",

          sgdisk --zap-all /dev/sdb && \
          dd if=/dev/zero of=/dev/sdb bs=4096k count=100 oflag=direct,dsync && \
          blkdiscard /dev/sdb && \
          partprobe /dev/sdb && \

          sgdisk --zap-all /dev/sdc && \
          dd if=/dev/zero of=/dev/sdc bs=4096k count=100 oflag=direct,dsync && \
          blkdiscard /dev/sdc && \
          partprobe /dev/sdc && \

          sgdisk --zap-all /dev/sdd && \
          dd if=/dev/zero of=/dev/sdd bs=4096k count=100 oflag=direct,dsync && \
          blkdiscard /dev/sdd && \
          partprobe /dev/sdd && \,
        ]
---
apiVersion: v1
kind: Pod
metadata:
  name: disk-wipe-node-2
  namespace: rook-ceph
spec:
  restartPolicy: Never
  nodeName: node-2
  containers:
    - name: disk-wipe
      image: cmd.cat/sgdisk/fdisk/dd/partprobe
      securityContext:
        privileged: true
      command: [
          "/bin/sh",
          "-c",

          sgdisk --zap-all /dev/sdb && \
          dd if=/dev/zero of=/dev/sdb bs=4096k count=100 oflag=direct,dsync && \
          blkdiscard /dev/sdb && \
          partprobe /dev/sdb && \

          sgdisk --zap-all /dev/sdc && \
          dd if=/dev/zero of=/dev/sdc bs=4096k count=100 oflag=direct,dsync && \
          blkdiscard /dev/sdc && \
          partprobe /dev/sdc && \

          sgdisk --zap-all /dev/sdd && \
          dd if=/dev/zero of=/dev/sdd bs=4096k count=100 oflag=direct,dsync && \
          blkdiscard /dev/sdd && \
          partprobe /dev/sdd && \,
        ]
---
apiVersion: v1
kind: Pod
metadata:
  name: disk-wipe-node-3
  namespace: rook-ceph
spec:
  restartPolicy: Never
  nodeName: node-3
  containers:
    - name: disk-wipe
      image: cmd.cat/sgdisk/fdisk/dd/partprobe
      securityContext:
        privileged: true
      command: [
          "/bin/sh",
          "-c",

          sgdisk --zap-all /dev/sdb && \
          dd if=/dev/zero of=/dev/sdb bs=4096k count=100 oflag=direct,dsync && \
          blkdiscard /dev/sdb && \
          partprobe /dev/sdb && \

          sgdisk --zap-all /dev/sdc && \
          dd if=/dev/zero of=/dev/sdc bs=4096k count=100 oflag=direct,dsync && \
          blkdiscard /dev/sdc && \
          partprobe /dev/sdc && \

          sgdisk --zap-all /dev/sdd && \
          dd if=/dev/zero of=/dev/sdd bs=4096k count=100 oflag=direct,dsync && \
          blkdiscard /dev/sdd && \
          partprobe /dev/sdd && \,
        ]
